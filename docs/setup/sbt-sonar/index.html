<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-setup/sbt-sonar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-25197264-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-TQFZXKB"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-TQFZXKB",{anonymize_ip:!0})</script><title data-rh="true">sbt-sonar | sonar-scala</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://sonar-scala.com/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://sonar-scala.com/img/logo.png"><meta data-rh="true" property="og:url" content="https://sonar-scala.com/docs/setup/sbt-sonar"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="sbt-sonar | sonar-scala"><meta data-rh="true" name="description" content="sbt-sonar is an sbt plugin, which"><meta data-rh="true" property="og:description" content="sbt-sonar is an sbt plugin, which"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sonar-scala.com/docs/setup/sbt-sonar"><link data-rh="true" rel="alternate" href="https://sonar-scala.com/docs/setup/sbt-sonar" hreflang="en"><link data-rh="true" rel="alternate" href="https://sonar-scala.com/docs/setup/sbt-sonar" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.66a51827.css">
<link rel="preload" href="/assets/js/runtime~main.48fb4282.js" as="script">
<link rel="preload" href="/assets/js/main.d6cb83e0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">sonar-scala</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/about/what-is-sonar-scala">Docs</a><a class="navbar__item navbar__link" href="/docs/changelog">Changelog</a><a href="https://github.com/sonar-scala/sonar-scala" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://gitter.im/sonar-scala/sonar-scala" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/"><img src="/img/logo.svg" alt="logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="logo" class="themedImage_W2Cr themedImage--dark_oUvU"><b>sonar-scala</b></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/about/what-is-sonar-scala">About</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about/what-is-sonar-scala">What is sonar-scala?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about/supported-metrics">Supported Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about/quality-rules-and-profiles">Quality Rules and Profiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about/compatibility-with-sonarqube">Compatibility with SonarQube</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/setup/getting-started">Setup</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/setup/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/setup/sonar-scanner-properties">Sonar-scanner Properties</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/setup/sbt-sonar">sbt-sonar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/setup/pr-decoration">Pull Request Decoration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/rules/scalastyle">Rules</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rules/scalastyle">Scalastyle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rules/scapegoat">Scapegoat</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/changelog">Changelog</a></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Setup</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">sbt-sonar</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>sbt-sonar</h1></header><p><a href="https://github.com/sonar-scala/sbt-sonar" target="_blank" rel="noopener noreferrer">sbt-sonar</a> is an sbt plugin, which
provides an easy way to execute SonarQube analysis for Scala projects. It uses
an embedded
<a href="https://github.com/SonarSource/sonar-scanner-api" target="_blank" rel="noopener noreferrer">sonar-scanner API</a> under the
hood, which allows you to run SonarQube scan without the need to have the
sonar-scanner executable installed in your environment.</p><div class="alert alert--info" role="alert">This plugin is particularly useful for CI when used together with e.g. sbt-release for an automated release process in your project, but it can be also used on its own.</div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">​</a></h2><ul><li>sbt 0.13.5+ or 1.0+</li><li>Scala 2.12/2.13</li><li><a href="https://www.sonarqube.org/downloads" target="_blank" rel="noopener noreferrer">SonarQube</a> server - see my
<a href="https://github.com/sonar-scala/sonar-scala-docker" target="_blank" rel="noopener noreferrer">sonar-scala-docker</a>
repository, which provides docker-compose recipes and docker images for
out-of-the-box SonarQube instance with sonar-scala which brings support for
<a href="http://www.scala-lang.org" target="_blank" rel="noopener noreferrer">Scala</a>,
<a href="https://github.com/scoverage/scalac-scoverage-plugin" target="_blank" rel="noopener noreferrer">Scoverage</a> (code
coverage metrics), <a href="https://scalastyle.beautiful-scala.com" target="_blank" rel="noopener noreferrer">Scalastyle</a> and
<a href="https://github.com/sksamuel/scapegoat" target="_blank" rel="noopener noreferrer">Scapegoat</a> (static code analysis).
Also read the <a href="/docs/setup/getting-started">Getting Started</a> guide.<br>Alternatively, see the instructions for manual installation
<a href="https://docs.sonarqube.org/latest/setup/get-started-2-minutes" target="_blank" rel="noopener noreferrer">here</a>.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="installation">Installation<a class="hash-link" href="#installation" title="Direct link to heading">​</a></h2><p>To install this plugin in your project, add the following to your
<code>./project/plugins.sbt</code> file:</p><code class="language-scala">addSbtPlugin(&quot;com.sonar-scala&quot; % &quot;sbt-sonar&quot; % &quot;2.3.0&quot;)</code><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="usage">Usage<a class="hash-link" href="#usage" title="Direct link to heading">​</a></h2><p>You can define your project properties either in the external config file
<code>sonar-project.properties</code>, which should be located in the root directory of
your project as explained in
<a href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner" target="_blank" rel="noopener noreferrer">SonarQube Scanner guide</a>
or directly in sbt. By default, the plugin expects the properties to be defined
in the <code>sonarProperties</code> settings key in sbt, which already comes with the
following set of <strong>predefined</strong> properties:</p><ul><li><strong>sonar.projectName</strong> - your project name defined in the <code>name</code> sbt setting
key</li><li><strong>sonar.projectKey</strong> - your project name transformed into a lowercase and
dash-separated value</li><li><strong>sonar.sourceEncoding</strong> - UTF-8</li><li><strong>sonar.sources</strong> - default Scala source directory relative to the root of
your project (usually <code>src/main/scala</code>, uses the value of
<code>scalaSource in Compile</code> defined by sbt)</li><li><strong>sonar.tests</strong> - default Scala tests directory relative to the root of your
project (usually <code>src/test/scala</code>, uses the value of <code>scalaSource in Test</code>
defined by sbt)</li><li><strong>sonar.scala.version</strong> - defines the version of Scala used in your project
(i.e. <code>scalaVersion</code>)</li><li><strong>sonar.scala.scoverage.reportPath</strong> - relative path to the scoverage report
(e.g. <code>target/scala-2.12/scoverage-report/scoverage.xml</code>)</li><li><strong>sonar.scala.scapegoat.reportPath</strong> - relative path to the scapegoat report
(e.g. <code>target/scala-2.12/scapegoat-report/scapegoat.xml</code>)</li></ul><p>Usually, the default settings are sufficient for majority of the projects and
you rarely need to change any of them, unless your project is set-up in an
unconventional way or contains multiple modules.</p><p>To add more properties to the existing config or to overwrite any of the
existing ones e.g. to set up a multi-module project, you can use the <code>++=</code>
operator, e.g.:</p><div class="language-scala codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-scala codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">import sbtsonar.SonarPlugin.autoImport.sonarProperties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sonarProperties ++= Map(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.modules&quot; -&gt; &quot;module1,module2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;module1.sonar.projectName&quot; -&gt; &quot;Module 1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;module2.sonar.projectName&quot; -&gt; &quot;Module 2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To overwrite the entire config provided by default, use the <code>:=</code> operator, e.g.:</p><div class="language-scala codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-scala codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">import sbtsonar.SonarPlugin.autoImport.sonarProperties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sonarProperties := Map(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.host.url&quot; -&gt; &quot;https://your-sonarqube-server.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.projectName&quot; -&gt; &quot;Project Name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.projectKey&quot; -&gt; &quot;project-name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.sources&quot; -&gt; &quot;src/main/scala&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.tests&quot; -&gt; &quot;src/test/scala&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.junit.reportPaths&quot; -&gt; &quot;target/test-reports&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.sourceEncoding&quot; -&gt; &quot;UTF-8&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.scala.scoverage.reportPath&quot; -&gt; &quot;target/scala-2.12/scoverage-report/scoverage.xml&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sonar.scala.scapegoat.reportPath&quot; -&gt; &quot;target/scala-2.12/scapegoat-report/scapegoat.xml&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="external-config">External config<a class="hash-link" href="#external-config" title="Direct link to heading">​</a></h3><p>To use the external <code>sonar-project.properties</code> file instead, you can set the
<code>sonarUseExternalConfig</code> to <code>true</code> and you can skip entirely setting the
<code>sonarProperties</code> value, e.g.:</p><div class="language-scala codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-scala codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">import sbtsonar.SonarPlugin.autoImport.sonarUseExternalConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sonarUseExternalConfig := true</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="execute-sonarqube-scan">Execute SonarQube scan<a class="hash-link" href="#execute-sonarqube-scan" title="Direct link to heading">​</a></h3><p>To run SonarQube analysis, execute the <strong><code>sonarScan</code></strong> sbt task in your project.
Depending on the configuration option you have chosen, the plugin will update
the <code>sonar.projectVersion</code> property to your current project version either in
<code>sonar-project.properties</code> file or in the <code>sonarProperties</code> in sbt config and it
will run the SonarQube scan printing the progress to sbt console.</p><p>Also, you can overwrite/set
<a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener noreferrer">sonarProperties</a>
via system properties (java options) when you execute <code>sonarScan</code> command, e.g.:</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">sbt -Dsonar.projectName</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">MyProjectName sonarScan</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="alert alert--warning" role="alert">Remember to set the <code>sonar.host.url</code> environment property before you execute the analysis.</div><p>You can do that either by adding it to the <code>sonarProperties</code> settings in sbt (as
shown in the examples above), or you can set it via a system property, e.g.:</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">sbt -Dsonar.host.url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://your-sonarqube-server.com sonarScan</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By default this property is set to <code>http://localhost:9000</code>.</p><p>sbt-sonar can also read the URL of your SonarQube instance from the
<code>SONAR_HOST_URL</code> environment variable instead of system properties. If both
values are present, the <code>sonar.host.url</code> system property takes precedence over
the environment variable.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="sbt-release">sbt-release<a class="hash-link" href="#sbt-release" title="Direct link to heading">​</a></h3><p>This plugin can be also easily used with
<a href="https://github.com/sbt/sbt-release" target="_blank" rel="noopener noreferrer">sbt-release</a> by wrapping the <code>sonarScan</code>
task in a <code>releaseStepTask</code> in the following way:</p><div class="language-scala codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-scala codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">import sbtsonar.SonarPlugin.autoImport.sonarScan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">releaseProcess := Seq[ReleaseStep](</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  releaseStepCommand(&quot;coverageOn&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  releaseStepTask(test),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  releaseStepCommand(&quot;coverageOff&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  releaseStepTask(coverageReport),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  releaseStepTask(scapegoat),</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  releaseStepTask(sonarScan),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="fallback-mode">Fallback mode<a class="hash-link" href="#fallback-mode" title="Direct link to heading">​</a></h3><p>It is possible to make the plugin call through to a standalone
<a href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner" target="_blank" rel="noopener noreferrer">sonar-scanner</a>
executable, if that&#x27;s what you prefer, for any reasons. This was the default
behaviour before version 2.0 and in case you experience any issues with 2.x, you
can fall back to using the standalone mode.</p><p>In order to do that, you need to have the
<a href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner" target="_blank" rel="noopener noreferrer">sonar-scanner</a>
installed on your CI server or locally, if you intend to run the analysis on
your machine. You also need to make sure you have defined the
<code>SONAR_SCANNER_HOME</code> environmental variable, or <code>sonarScanner.home</code> system
property, and updated the global settings in
<code>$SONAR_SCANNER_HOME/conf/sonar-scanner.properties</code> to point to your SonarQube
instance (you can also do that by setting the <code>sonar.host.url</code> via system
properties, as shown above).</p><p>To enable the fallback mode set the <code>sonarUseSonarScannerCli</code> seting to <code>true</code>,
e.g.:</p><div class="language-scala codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-scala codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">import sbtsonar.SonarPlugin.autoImport.sonarUseSonarScannerCli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sonarUseSonarScannerCli := true</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="examples">Examples<a class="hash-link" href="#examples" title="Direct link to heading">​</a></h2><p>Please see the
<a href="https://github.com/sonar-scala/sbt-sonar/tree/master/src/sbt-test/sbt-sonar" target="_blank" rel="noopener noreferrer">tests</a>
directory for some example projects. You can find there examples of projects
using sbt 0.13 and 1.0, Scala 2.11, 2.12, a multi-module project and a project
using an external properties file.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="changelog">Changelog<a class="hash-link" href="#changelog" title="Direct link to heading">​</a></h2><ul><li><strong>2.3.0</strong> (02.05.2021) - Automatically set <code>sonar.projectBaseDir</code> property for
the scanned project
(<a href="https://github.com/sonar-scala/sbt-sonar/pull/177" target="_blank" rel="noopener noreferrer">#177</a>).</li><li><strong>2.2.0</strong> (05.07.2020) - Improve compatibility with
<a href="https://docs.sonarqube.org/latest/analysis/languages/scala" target="_blank" rel="noopener noreferrer">SonarScala</a>
plugin (<a href="https://github.com/sonar-scala/sbt-sonar/pull/117" target="_blank" rel="noopener noreferrer">#117</a>). This
release adds a new setting key (<code>sonarExpectSonarQubeCommunityPlugin</code>), which
allows toggling compatibility between <a href="https://sonar-scala.com" target="_blank" rel="noopener noreferrer">sonar-scala</a>
and <a href="https://docs.sonarqube.org/latest/analysis/languages/scala" target="_blank" rel="noopener noreferrer">SonarScala</a>
plugins. This change is backwards compatible and the
<code>sonarExpectSonarQubeCommunityPlugin</code> setting is set to <code>true</code> by default. If
you&#x27;re targeting the SonarScala plugin, toggling this setting to <code>false</code>
changes the default Scoverage and Scapegoat property names, i.e.:<ul><li><code>sonar.scala.scoverage.reportPath</code> changes to
<code>sonar.scala.coverage.reportPaths</code></li><li><code>sonar.scala.scapegoat.reportPath</code> changes to
<code>sonar.scala.scapegoat.reportPaths</code></li></ul></li><li><strong>2.1.1</strong> (25.04.2020) - Fix missing sonar.projectVersion property
(<a href="https://github.com/sonar-scala/sbt-sonar/pull/104" target="_blank" rel="noopener noreferrer">#104</a>).</li><li><strong>2.1.0</strong> (16.10.2019) - Allow to use <code>SONAR_HOST_URL</code> environment variable to
define SonarQube instance URL instead of the <code>sonar.host.url</code> system property.
If both values are present, the <code>sonar.host.url</code> system property takes
precedence over the environment variable.
(<a href="https://github.com/SonarSource/sonar-scanner-api/pull/69" target="_blank" rel="noopener noreferrer">sonar-scanner-api#69</a>)</li><li><strong>2.0.0</strong> (17.06.2019) - Use an embedded sonar-scanner
(<a href="https://github.com/sonar-scala/sbt-sonar/pull/34" target="_blank" rel="noopener noreferrer">#34</a>) 🎊 This
version removes the dependency on having the standalone sonar-scanner-cli
installed. To upgrade from 1.x please define the <code>sonar.host.url</code> property
explicitly before running the <code>sonarScan</code> task (see the
<a href="#execute-sonarqube-scan">Execute SonarQube section</a> for more details). If you
want to fallback to the default behaviour from 1.x, which makes the plugin
call through to the standalone sonar-scanner, you can set the
<code>sonarUseSonarScannerCli</code> setting to <code>true</code> (see the
<a href="#fallback-mode">Fallback mode</a> section for more details).</li><li><strong>1.7.0</strong> (06.06.2019) - Renamed deprecated <code>sonar.scoverage.reportPath</code>
property to <code>sonar.scala.scoverage.reportPath</code>
(<a href="https://github.com/sonar-scala/sbt-sonar/pull/30" target="_blank" rel="noopener noreferrer">#30</a>).</li><li><strong>1.6.0</strong> (31.12.2018) - Set automatically the <code>sonar.tests</code> property
(<a href="https://github.com/sonar-scala/sbt-sonar/issues/25" target="_blank" rel="noopener noreferrer">#25</a>).</li><li><strong>1.5.0</strong> (14.09.2018) - Allow sbt-sonar to run on Windows
(<a href="https://github.com/sonar-scala/sbt-sonar/issues/16" target="_blank" rel="noopener noreferrer">#16</a>).</li><li><strong>1.4.0</strong> (14.09.2018) - Set automatically the <code>sonar.scala.version</code> property
(<a href="https://github.com/sonar-scala/sbt-sonar/issues/13" target="_blank" rel="noopener noreferrer">#13</a>).</li><li><strong>1.3.0</strong> (06.02.2018) - Allow to set sonar properties via system properties
(<a href="https://github.com/sonar-scala/sbt-sonar/issues/7" target="_blank" rel="noopener noreferrer">#7</a>).</li><li><strong>1.2.0</strong> (31.01.2018) - Use <code>SONAR_SCANNER_HOME/bin</code> for lookup of the
sonar-scanner executable
(<a href="https://github.com/sonar-scala/sbt-sonar/issues/4" target="_blank" rel="noopener noreferrer">#4</a>).</li><li><strong>1.1.0</strong> (19.01.2018) - Search for <code>sonar-scanner</code> home directory in system
properties (<code>sonarScanner.home</code>) if <code>SONAR_SCANNER_HOME</code> environmental
variable is not defined
(<a href="https://github.com/sonar-scala/sbt-sonar/issues/1" target="_blank" rel="noopener noreferrer">#1</a>).</li><li><strong>1.0.0</strong> (06.11.2017) - Support for sbt 1.0 💪 default scoverage and
scapegoat report paths added automatically to the <code>sonarProperties</code> config;
added unit and sbt tests.</li><li><strong>0.3.1</strong> (03.01.2017) - Updated the scope of <code>scalaSource</code> setting key to
resolve scoping ambiguity with some other plugins.</li><li><strong>0.3.0</strong> (02.01.2017) - Defined a set of default project settings in the
<code>sonarProperties</code> config key.</li><li><strong>0.2.0</strong> (22.12.2016) - Added the ability to define sonar project properties
directly in sbt.</li><li><strong>0.1.0</strong> (12.12.2016) - First release of the plugin! 🎉</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/sonar-scala/website/edit/master/docs/setup/sbt-sonar.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/setup/sonar-scanner-properties"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Sonar-scanner Properties</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/setup/pr-decoration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pull Request Decoration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a><ul><li><a href="#external-config" class="table-of-contents__link toc-highlight">External config</a></li><li><a href="#execute-sonarqube-scan" class="table-of-contents__link toc-highlight">Execute SonarQube scan</a></li><li><a href="#sbt-release" class="table-of-contents__link toc-highlight">sbt-release</a></li><li><a href="#fallback-mode" class="table-of-contents__link toc-highlight">Fallback mode</a></li></ul></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li><li><a href="#changelog" class="table-of-contents__link toc-highlight">Changelog</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about/what-is-sonar-scala">About</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/setup/getting-started">Get started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/changelog">Changelog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Get help</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/sonar-scala/sonar-scala/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitter.im/sonar-scala/sonar-scala" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat on Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Related projects</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/sonar-scala/sbt-sonar" target="_blank" rel="noopener noreferrer" class="footer__link-item">sbt-sonar<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/sonar-scala/sonar-scala-docker" target="_blank" rel="noopener noreferrer" class="footer__link-item">sonar-scala-docker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 sonar-scala. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.48fb4282.js"></script>
<script src="/assets/js/main.d6cb83e0.js"></script>
</body>
</html>